# Molecula

Интерактивная мини-соцплатформа с опросами и голосованиями.

## Функции

- Регистрация и вход пользователей
- Личный кабинет и страница профиля
- Создание постов-голосований с фото
- Категории (разделы) для постов
- Таймер окончания голосования
- Анонимные и неанонимные голосования
- Комментарии под голосованиями
- Защита от повторного голосования
- Система жалоб
- Админ-панель: бан пользователей, удаление постов/комментариев, обработка жалоб
- Переключение светлой/темной темы
- Страница реквизитов автора (`/requisites`)

## Стек

- Node.js + Express
- EJS
- PostgreSQL (`pg`)
- `express-session` + `connect-pg-simple`
- `multer` для загрузки изображений

## Локальный запуск

1. Поднимите PostgreSQL.
2. Скопируйте `.env.example` в `.env` и заполните `DATABASE_URL`.
3. Установите зависимости и запустите приложение:

```bash
npm install
npm start
```

Сервер доступен на `http://localhost:3000`.

## База данных

Схема создается автоматически при старте (`initDb()`), включая начальные категории.

Первый зарегистрированный пользователь автоматически становится администратором.

## Railway деплой

1. Создайте проект на Railway из репозитория.
2. Добавьте сервис PostgreSQL в Railway (Plugin/Database).
3. В переменных окружения backend-сервиса укажите:
   - `DATABASE_URL` (из Railway Postgres)
   - `SESSION_SECRET` (длинная случайная строка)
   - `NODE_ENV=production`
4. Деплой идет через `Dockerfile`.
5. После деплоя откройте публичный URL Railway.

## Примечание по файлам

Загруженные изображения сохраняются в `public/uploads`. Для серьезного продакшена лучше вынести в S3-совместимое хранилище.

